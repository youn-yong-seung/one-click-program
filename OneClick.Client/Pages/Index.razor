@page "/"
@inject NavigationManager Nav
@layout OneClick.Client.Shared.MainLayout
@inject TokenService TokenService
@using OneClick.Client.Services

<p>Redirecting...</p>

@code {
    protected override async Task OnInitializedAsync()
    {
        try
        {
            var hasToken = await TokenService.LoadTokensAsync();
            
            if (!hasToken)
            {
                Nav.NavigateTo("/login");
            }
            else
            {
                Nav.NavigateTo("/dashboard/home");
            }
        }
        catch (Exception ex)
        {
            // Error loading token? Default to login
            Console.WriteLine($"Token load error: {ex.Message}");
            Nav.NavigateTo("/login");
        }
    }
}
